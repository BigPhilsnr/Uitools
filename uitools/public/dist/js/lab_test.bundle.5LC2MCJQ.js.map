{
  "version": 3,
  "sources": ["../../../../../apps/frontend/frontend/public/js/client_scripts/lab_test.bundle.js"],
  "sourcesContent": ["// frm.toggle_reqd('priority', frm.doc.status === 'Open');\nfrappe.ui.form.on(\"Lab Test\", {\n    refresh: function(frm) {\n        if(frm.doc.workflow_state === 'Awaiting Checkin'){\n            frm.set_intro('Action to awaiting payment to proceed. For inpatient click the Re-Evaluate Payments');\n            frm.set_intro('Please action on all test(s) that have been paid for', 'red');\n        }\n        if (frm.doc.status === 'Cancelled') {\n            frm.set_intro('This test has been cancelled, check the comments for reason of cancellation');\n        }\n        frm.toggle_reqd('employee', frm.doc.workflow_state === 'Processing');\n        frm.toggle_reqd('employee', frm.doc.workflow_state === 'To Receive');\n        frm.add_custom_button('Re-Evaluate Payments/Emergency/Inpatient', () => {\n            api({\n                method: 'billing.billing.api.sales_invoice.create_sales_invoice.re_eveluate_sales_orders',\n                args: {\n                    patient_name: frm.doc.patient,\n                    lab_name:frm.doc.name\n                }\n            }).then(() => {\n                frm.reload_doc();\n            })\n        })\n        frm.change_custom_button_type('Re-Evaluate Payments/Emergency/Inpatient', null, 'primary');\n        if (frappe.user_roles.includes('Physician') || frappe.user_roles.includes('Administrator') || frappe.user_roles.includes('Support Team Master') || frappe.user_roles.includes('Laboratory User')) {\n            if (frm.doc.workflow_state === 'Awaiting Checkin' || frm.doc.workflow_state === 'Awaiting Payment' || frm.doc.workflow_state === 'Awaiting Payment' || frm.doc.workflow_state === 'Awaiting Sampling') {\n                frm.add_custom_button('Cancel Test', () => {\n                    frappe.confirm('Are you sure you want to proceed?',\n                        () => {\n                            // action to perform if Yes is selected\n                            frappe.prompt([{\n                                label: 'Reason For Cancellation',\n                                fieldname: 'comment',\n                                fieldtype: 'Text',\n                                reqd: 1\n                            }], (values) => {\n                                api({\n                                    method: 'clinical.api.patient_encounter.patient_encounter.cancel_lab_test',\n                                    args: {\n                                        lab_name: frm.doc.name,\n                                        comment: values.comment\n                                    }\n                                }).then(() => {\n                                    frm.reload_doc();\n                                })\n                            })\n                        })\n                });\n                frm.change_custom_button_type('Cancel Test', null, 'danger');\n            }\n        } else {\n            // frm.disable_save();\n        }\n    }\n})\nfrappe.ui.form.on('Lab Test', \"processing_lab\" ,function(frm, cdt, cdn){\n    if (frm.is_dirty()) {\n        frm.save();\n    }\n});\n\nfrappe.ui.form.on('Lab Test', \"employee\" ,function(frm, cdt, cdn){\n    if (frm.is_dirty()) {\n        frm.save();\n    }\n});\n// frappe.ui.form.on(\"Patient Encounter\", {\n//     refresh: function(frm) {\n//         frm.add_custom_button('Re-Create Labs', () => {\n//             api({\n//                 method: 'clinical.api.patient_encounter.patient_encounter.re_create_lab_test',\n//                 args: {\n//                     encounter_name: frm.doc.name,\n//                 }\n//             }).then(() => {\n//                 frm.reload_doc();\n//             })\n//         })\n//     }\n// })"],
  "mappings": ";;AACA,SAAO,GAAG,KAAK,GAAG,YAAY;AAAA,IAC1B,SAAS,SAAS,KAAK;AACnB,UAAG,IAAI,IAAI,mBAAmB,oBAAmB;AAC7C,YAAI,UAAU;AACd,YAAI,UAAU,wDAAwD;AAAA;AAE1E,UAAI,IAAI,IAAI,WAAW,aAAa;AAChC,YAAI,UAAU;AAAA;AAElB,UAAI,YAAY,YAAY,IAAI,IAAI,mBAAmB;AACvD,UAAI,YAAY,YAAY,IAAI,IAAI,mBAAmB;AACvD,UAAI,kBAAkB,4CAA4C,MAAM;AACpE,YAAI;AAAA,UACA,QAAQ;AAAA,UACR,MAAM;AAAA,YACF,cAAc,IAAI,IAAI;AAAA,YACtB,UAAS,IAAI,IAAI;AAAA;AAAA,WAEtB,KAAK,MAAM;AACV,cAAI;AAAA;AAAA;AAGZ,UAAI,0BAA0B,4CAA4C,MAAM;AAChF,UAAI,OAAO,WAAW,SAAS,gBAAgB,OAAO,WAAW,SAAS,oBAAoB,OAAO,WAAW,SAAS,0BAA0B,OAAO,WAAW,SAAS,oBAAoB;AAC9L,YAAI,IAAI,IAAI,mBAAmB,sBAAsB,IAAI,IAAI,mBAAmB,sBAAsB,IAAI,IAAI,mBAAmB,sBAAsB,IAAI,IAAI,mBAAmB,qBAAqB;AACnM,cAAI,kBAAkB,eAAe,MAAM;AACvC,mBAAO,QAAQ,qCACX,MAAM;AAEF,qBAAO,OAAO,CAAC;AAAA,gBACX,OAAO;AAAA,gBACP,WAAW;AAAA,gBACX,WAAW;AAAA,gBACX,MAAM;AAAA,kBACN,CAAC,WAAW;AACZ,oBAAI;AAAA,kBACA,QAAQ;AAAA,kBACR,MAAM;AAAA,oBACF,UAAU,IAAI,IAAI;AAAA,oBAClB,SAAS,OAAO;AAAA;AAAA,mBAErB,KAAK,MAAM;AACV,sBAAI;AAAA;AAAA;AAAA;AAAA;AAKxB,cAAI,0BAA0B,eAAe,MAAM;AAAA;AAAA,aAEpD;AAAA;AAAA;AAAA;AAKf,SAAO,GAAG,KAAK,GAAG,YAAY,kBAAkB,SAAS,KAAK,KAAK,KAAI;AACnE,QAAI,IAAI,YAAY;AAChB,UAAI;AAAA;AAAA;AAIZ,SAAO,GAAG,KAAK,GAAG,YAAY,YAAY,SAAS,KAAK,KAAK,KAAI;AAC7D,QAAI,IAAI,YAAY;AAChB,UAAI;AAAA;AAAA;",
  "names": []
}
